<% Array(instances).each do |instance| %>
    <% next if instance['_inherited'] || (instance.key?('digital_object') && instance['digital_object']['_resolved']['publish'] == false) %>
    <% if instance['instance_type'] == 'digital_object' && instance['digital_object'] %>
      <% file_versions = instance['digital_object']['_resolved']['file_versions'] %>
      <%# Check if any file version will be added to the pdf. Only add content warnings if at least one file version #%>
      <% include_reparative_descriptions = false %>
      <% Array(file_versions).each do |file| %>
          <% if file['publish'] && file['file_uri'] && file['xlink_show_attribute'] != 'embed' %>
              <%# set this to true for later use #%>
              <% include_reparative_descriptions = true %>
              <dt><%= I18n.t('resource._public.digital_object') %></dt>
              <dd><%= link_to(file['file_uri'], file['file_uri']) %></dd>
          <% end %>
      <% end %>
    <% end %>
    <!-- Aspace Content Warning Customization Begin -->
    <% reparative_descriptions = instance['digital_object']['_resolved']['reparative_descriptions'] %>
    <% if AppConfig[:plugins].include?('aspace_reparative_descriptions') && include_reparative_descriptions %>
        <% unless reparative_descriptions.blank? %>
          <dt><%= I18n.t('pdf_reports.do_reparative_descriptions_heading') %></dt>
          <dd>
            <%= render(:partial => 'aspace_reparative_descriptions', :locals => {:reparative_descriptions => reparative_descriptions}) %>
          </dd>
        <% end %>
    <% end %>
    <!-- Aspace Content Warning Customization End -->
<% end %>
